services:
  # Web Service - Main SPIN Application
  - type: web
    name: spin-app
    runtime: node
    plan: starter  # Change to 'standard' or 'pro' for production
    region: oregon  # Options: oregon, frankfurt, singapore, mumbai, tokyo
    buildCommand: npm install && cd server && npm install && npm run prisma:generate && cd ../client && npm install && CI=false npm run build
    startCommand: node server/index.js
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      # PORT is automatically set by Render, no need to define it
      - key: JWT_SECRET
        generateValue: true
      - key: ADMIN_PASSWORD
        sync: false  # Set this manually in Render dashboard
      - key: AUTO_ROTATION
        value: true
      - key: CORS_ORIGIN
        fromService:
          type: web
          name: spin-app
          property: host
      - key: DB_TYPE
        value: sqlite  # Change to postgres if using PostgreSQL database
      - key: DB_PATH
        value: ./database/spin.db
      # Uncomment and configure these if using cloud backups
      # - key: CLOUD_BACKUP_ENABLED
      #   value: false
      # - key: AUTO_RESTORE_ENABLED
      #   value: true
      # - key: BACKUP_SCHEDULE
      #   value: daily

databases:
  # Uncomment to add PostgreSQL database (recommended for production)
  # - name: spin-database
  #   plan: starter  # Options: starter, standard, pro
  #   databaseName: spin_db
  #   user: spin_user
